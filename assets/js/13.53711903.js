(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{334:function(t,a,r){"use strict";r.r(a);var e=r(3),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"_1-arthas是什么"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-arthas是什么"}},[t._v("#")]),t._v(" 1 Arthas是什么？")]),t._v(" "),r("p",[t._v("Arthas 是Alibaba开源的Java诊断工具，深受开发者喜爱。")]),t._v(" "),r("blockquote",[r("p",[t._v("当你遇到以下类似问题而束手无策时，Arthas可以帮助你解决：")])]),t._v(" "),r("blockquote",[r("p",[t._v("这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？")])]),t._v(" "),r("blockquote",[r("p",[t._v("我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？")])]),t._v(" "),r("blockquote",[r("p",[t._v("遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？")])]),t._v(" "),r("blockquote",[r("p",[t._v("线上遇到某个用户的数据处理有问题，但线上同样无法 debug，线下无法重现！")])]),t._v(" "),r("blockquote",[r("p",[t._v("是否有一个全局视角来查看系统的运行状况？")])]),t._v(" "),r("blockquote",[r("p",[t._v("有什么办法可以监控到JVM的实时运行状态？")])]),t._v(" "),r("blockquote",[r("p",[t._v("怎么快速定位应用的热点，生成火焰图？")])]),t._v(" "),r("blockquote",[r("p",[t._v("怎样直接从JVM内查找某个类的实例？")])]),t._v(" "),r("h2",{attrs:{id:"_2-arthas安装下载"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-arthas安装下载"}},[t._v("#")]),t._v(" 2 Arthas安装下载")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("curl -O https://arthas.aliyun.com/arthas.jar\n")])])]),r("p",[t._v("或者官网下载压缩包\n地址："),r("a",{attrs:{href:"https://arthas.aliyun.com/doc/quick-start.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arthas.aliyun.com/doc/quick-start.html"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"_3-启动"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动"}},[t._v("#")]),t._v(" 3 启动")]),t._v(" "),r("p",[t._v("默认情况下，arthas只监听 127.0.0.1，所以如果想从远程连接，则可以使用 --target-ip参数指定listen的IP")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("java -jar arthas-boot.jar   #默认127.0.0.1\n")])])]),r("p",[t._v("或者")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("java -jar arthas-boot.jar --target-ip 10.2.25.59     #指定ip，可远程访问\n")])])]),r("p",[r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FireHH/github_img_repository/img/clipboard.png",alt:""}}),t._v("\n选择进程，输入1\n"),r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FireHH/github_img_repository/img/clipboard2.png",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"_4-控制台访问"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-控制台访问"}},[t._v("#")]),t._v(" 4 控制台访问")]),t._v(" "),r("p",[r("a",{attrs:{href:"http://10.2.25.88:8563/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://10.2.25.88:8563/"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("或者")]),t._v(" "),r("p",[r("a",{attrs:{href:"http://10.2.25.88:3658/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://10.2.25.88:3658/"),r("OutboundLink")],1),t._v(" "),r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FireHH/github_img_repository/img/clipboard3.png",alt:""}})]),t._v(" "),r("p",[t._v("PS:两个端口 , 3658是 telnet， 8563是 http端口。")]),t._v(" "),r("h2",{attrs:{id:"_5-关于配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-关于配置"}},[t._v("#")]),t._v(" 5 关于配置")]),t._v(" "),r("p",[t._v("arthas.properties文件在arthas的目录下。\n如果是自动下载的arthas，则目录在~/.arthas/lib/3.x.x/arthas/下面\n如果是下载的完整包，在arthas解压目录下\n"),r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FireHH/github_img_repository/img/clipboard4.png",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"_6-命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-命令"}},[t._v("#")]),t._v(" 6 命令")]),t._v(" "),r("p",[t._v("参考 "),r("a",{attrs:{href:"https://arthas.aliyun.com/doc/commands.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arthas.aliyun.com/doc/commands.html"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"_7-通过tunnel-server连接的方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-通过tunnel-server连接的方式"}},[t._v("#")]),t._v(" 7 通过tunnel server连接的方式")]),t._v(" "),r("p",[t._v("为什么要用tunnel server？\n在流式计算里，Java进程可以是在不同的机器启动的，想要使用Arthas去诊断会比较麻烦，因为用户通常没有机器的权限，即使登陆机器也分不清是哪个Java进程")]),t._v(" "),r("h3",{attrs:{id:"_7-1先在本地下载tunnel-server"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-1先在本地下载tunnel-server"}},[t._v("#")]),t._v(" 7.1先在本地下载tunnel server")]),t._v(" "),r("p",[t._v("下载地址: "),r("a",{attrs:{href:"https://github.com/alibaba/arthas/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/alibaba/arthas/releases"),r("OutboundLink")],1),t._v("\n启动tunnel server")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("java -jar arthas-tunnel-server-3.5.3-fatjar.jar\n")])])]),r("p",[t._v("访问http://10.2.21.32:8080/\n"),r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FireHH/github_img_repository/img/clipboard5.png",alt:""}})]),t._v(" "),r("h3",{attrs:{id:"_7-2在服务机器上启动arthas"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-2在服务机器上启动arthas"}},[t._v("#")]),t._v(" 7.2在服务机器上启动arthas")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("./as.sh --target-ip 10.2.25.88 --tunnel-server 'ws://10.2.21.32:7777/ws'\n")])])]),r("p",[r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FireHH/github_img_repository/img/clipboard6.png",alt:""}})]),t._v(" "),r("p",[t._v("生成的id即agentid，用于tunnel server连接\n通过--select参数可以指定进程名字，非常方便。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("./as.sh --select math-game\n")])])]),r("h3",{attrs:{id:"_7-3连接"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-3连接"}},[t._v("#")]),t._v(" 7.3连接")]),t._v(" "),r("p",[t._v("输入agentid，成功连接\n"),r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FireHH/github_img_repository/img/clipboard7.png",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"_8基础命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_8基础命令"}},[t._v("#")]),t._v(" 8基础命令")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://arthas.aliyun.com/doc/commands.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arthas.aliyun.com/doc/commands.html"),r("OutboundLink")],1)]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("help  查看命令帮助信息\ncls   清空当前屏幕区域\nsession  查看当前会话的信息\nreset  重置增强类，将被 Arthas 增强过的类全部还原，Arthas 服务端关闭时会重置所有增强过的类\nversion  输出当前目标 Java 进程所加载的 Arthas 版本号\nhistory  打印命令历史\nquit   退出当前 Arthas 客户端，其他 Arthas 客户端不受影响\nstop   关闭 Arthas 服务端，所有 Arthas 客户端全部退出\nkeymap   Arthas快捷键列表及自定义快捷键\ndashboard   当前系统的实时数据面板\nthread   查看当前 JVM 的线程堆栈信息\nheapdump  类似jmap，只dump存活 --live\njad  查看源码\nprofiler 生成火焰图\n")])])]),r("p",[t._v("参考：")]),t._v(" "),r("p",[t._v("官网："),r("a",{attrs:{href:"https://arthas.aliyun.com/en-us/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arthas.aliyun.com/en-us/"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("文档："),r("a",{attrs:{href:"https://arthas.aliyun.com/doc/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arthas.aliyun.com/doc/"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("GitHub："),r("a",{attrs:{href:"https://github.com/alibaba/arthas",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/alibaba/arthas"),r("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=s.exports}}]);